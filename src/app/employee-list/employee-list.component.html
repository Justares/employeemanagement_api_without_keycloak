<h1>LF10-Starter</h1>

<div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
  <button (click)="createNewUser()" style="padding: 5px 10px;">
    New User
  </button>
</div>

<table>
  <thead>
  <tr>
    <th>
      <div style="display: flex; align-items: center;">
        <input
          type="text"
          placeholder="Filter by ID"
          [(ngModel)]="idFilter"
          style="padding: 5px; width: calc(100% - 80px); margin-right: 5px;"
        />
        <button (click)="applyFilters()">Search</button>
      </div>
    </th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <!-- Fehlermeldung anzeigen -->
  <tr *ngIf="errorMessage">
    <td colspan="4" style="color: red; text-align: center;">{{ errorMessage }}</td>
  </tr>

  <!-- Mitarbeiterliste anzeigen -->
  <tr *ngFor="let e of filteredEmployees$ | async">
    <td>{{ e.lastName }}, {{ e.firstName }}</td>
    <td style="text-align: center;">
      <button (click)="showDetails(e.id)" style="margin: 0 2px;">SHOW</button>
    </td>
    <td style="text-align: center;">
      <button (click)="editEmployee(e.id)" style="margin: 0 2px;">EDIT</button>
    </td>
    <td style="text-align: center;">
      <button (click)="deleteEmployee(e.id)" style="margin: 0 2px;">X</button>
    </td>
  </tr>
  </tbody>
</table>

<app-confirmation-dialog
  *ngIf="showConfirmation"
  [message]="'Are you sure you want to delete this employee?'"
  (confirm)="confirmDelete()"
  (cancel)="cancelDelete()"
></app-confirmation-dialog>


<!-- Modal component -->
<app-new-user
  *ngIf="showNewUserModal"
  (closeModal)="handleModalClose($event)">
</app-new-user>
